<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cart | B&M Trading LLP</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="navbar"><div class="navbar-inner"><div class="brand">B&M Trading LLP</div><div class="nav-links"><a href="index.html">Home</a><a href="checkout.html">Checkout</a></div></div></header>
  <div style="height:64px;"></div>

  <main class="container" style="padding:30px 18px;">
    <div class="card" style="padding:20px;">
      <h1>Shopping Cart</h1>
      <div id="cartList"></div>
      <p id="empty" class="small">Your cart is empty.</p>
      <div id="total" style="text-align:right;font-weight:700;margin-top:12px;"></div>
      <div style="text-align:center;margin-top:14px;"><a id="goCheckout" href="checkout.html" class="btn">Proceed to Checkout</a></div>
    </div>
  </main>

  <script>
    const cartList = document.getElementById('cartList');
    const empty = document.getElementById('empty');
    const totalEl = document.getElementById('total');

    function render(){
      const cart = JSON.parse(localStorage.getItem('cart')||'[]');
      cartList.innerHTML = '';
      if(cart.length===0){ empty.style.display='block'; totalEl.textContent=''; document.getElementById('goCheckout').style.display='none'; return; }
      empty.style.display='none'; document.getElementById('goCheckout').style.display='inline-block';
      let total=0;
      cart.forEach((it,i)=>{
        const div = document.createElement('div'); div.style.display='flex'; div.style.justifyContent='space-between'; div.style.padding='8px 0';
        div.innerHTML = `<div>${it.name} <div class="small">KSh ${Number(it.price).toLocaleString()}</div></div><div><button onclick="remove(${i})" class="btn btn-danger">Remove</button></div>`;
        cartList.appendChild(div); total+=Number(it.price)* (it.quantity||1);
      });
      totalEl.textContent = 'Total: KSh '+total.toLocaleString();
    }
    function remove(i){ let cart=JSON.parse(localStorage.getItem('cart')||'[]'); cart.splice(i,1); localStorage.setItem('cart',JSON.stringify(cart)); render(); }
    render();
  </script>
</body>
</html>
