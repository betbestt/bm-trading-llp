<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Your Cart | B&M Trading LLP</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  <style>
    body {
      background-color: #f5f5f7;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    }
    .apple-card {
      background: white;
      border-radius: 1rem;
      box-shadow: 0 8px 20px rgba(0,0,0,0.05);
    }
    .btn-black {
      background: black;
      color: white;
      border-radius: 9999px;
      padding: 0.75rem 2rem;
      transition: background 0.3s;
    }
    .btn-black:hover {
      background: #333;
    }
  </style>
</head>
<body class="flex flex-col items-center p-6">
  
  <div class="apple-card w-full max-w-4xl p-8">
    <h1 class="text-3xl font-semibold mb-6 text-gray-900 text-center">Your Shopping Cart</h1>
    
    <div id="cartList" class="space-y-4"></div>
    <p id="emptyCartMsg" class="text-gray-500 text-center hidden">Your cart is currently empty.</p>
    
    <div id="totalContainer" class="mt-6 text-right text-lg font-medium text-gray-800"></div>

    <div class="text-center mt-6">
      <a id="checkoutBtn" href="checkout.html" class="btn-black hidden">Proceed to Checkout</a>
    </div>
  </div>

  <script>
    const cartList = document.getElementById('cartList');
    const emptyCartMsg = document.getElementById('emptyCartMsg');
    const totalContainer = document.getElementById('totalContainer');
    const checkoutBtn = document.getElementById('checkoutBtn');

    function loadCart() {
      const cart = JSON.parse(localStorage.getItem('cart')) || [];
      cartList.innerHTML = '';

      if (cart.length === 0) {
        emptyCartMsg.classList.remove('hidden');
        totalContainer.textContent = '';
        checkoutBtn.classList.add('hidden');
        return;
      }

      emptyCartMsg.classList.add('hidden');
      checkoutBtn.classList.remove('hidden');
      let total = 0;

      cart.forEach((item, index) => {
        const div = document.createElement('div');
        div.className = 'flex justify-between items-center border-b pb-3';
        div.innerHTML = `
          <div class="flex items-center space-x-4">
            <img src="${item.imageURL}" alt="${item.name}" class="w-20 h-20 rounded object-cover">
            <div>
              <p class="font-medium text-gray-900">${item.name}</p>
              <p class="text-gray-600 text-sm">KSh ${Number(item.price).toLocaleString()}</p>
            </div>
          </div>
          <button onclick="removeItem(${index})" class="text-red-500 hover:underline">Remove</button>
        `;
        cartList.appendChild(div);
        total += Number(item.price);
      });

      totalContainer.innerHTML = `Total: <strong>KSh ${total.toLocaleString()}</strong>`;
    }

    function removeItem(index) {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      loadCart();
    }

    loadCart();
  </script>
</body>
</html>
